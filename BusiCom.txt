240
17
1
80 # Keyboard handling SUB
176
81
95
173
177
240
81
95
173 
28 # jump, if valid data was shifted from the buffer
41
104
81 # set lamps by port RAM1
115
39
236
245
179
104
240
81
160
243
179
245
225
102
39
234
245
247
20 # jump back, if ROM2.bit3 is low: paper advance button is not held down
0
82
70
64
0
176
236
248
248
228
39
234
231
80
100
39
234
230
52
32
160
165
177
48
104
81
115
208
225
209
243
245
252
133
26
0
240
0
0
17
79
80
176
38
32
40
16
83
0
81
0
113
90
96
20
75
247
20
87
67
2
212
64
212
211
41
226
208
226
192
108 # R12, the printer drum sector counter is incremented
34
32
35
234 # read ROM2 input port (paper/drum signals)
246
115
109
26 # if ROM2.0 = 1 (drum sector = 0), R12 = 0
118
240
188
192
169
20
217
40
0
240
81
74
64
247
187
199
99
83
25
26
104
88
5
65
49
24
34
18
5
12
157
109
61
189
141
93
45
6
125
77
29
13
173
164
14
191
6
145
152
241
205
215
253
138
5
97
249
215
215
202
197
80 # R12 synchronization with the printer drum sectors
106
40
7
80 # shift one high bit into keyboard shifter
100
121
180
38
24
34
0
209
80 # shift one low bit into keyboard shifter
101
39
234  # Read ROM1 port, rows of the selected keyboard column
252
185
162
245
247
28
119
169
121
205
64
122
20
97
178
245
250
246
178
131
179
208
130
178
80
100
119
191
41
162
245
247
20
248
239
242
247
28
247
236
185
41
163 
224 # write R3 (lower half of the scan code) into the buffer
105
41
233
28
122
162
224
105
169
228
223
231
40 # exit from the keyboard check, initialize R6R7 -> WR, R8R9 -> KR
0
38
16
25
253
192
51 # jump to the pseudo instruction code associated routine
165
242
242
134
184
182
65
14
102
102
102
102
102
39
233
41
224
105
119
14
39
236
179
237
41
229
179
228
192
212
133
182
41
233
39
235
251
224
105
119
33
241
192
212
133
184
65
51
212
133
182
250
249
41
232
241
39
235
251
224
105
119
53
26
67
109
193
104
104
104
104
104
104
41
224
121
74
228
229
192
104
104
41
233
189
224
121
83
192
222
185
173
104
104
189
169
248
241
185
41
233
189
224
169
28
97
192
104
104
41
238
248
243
193
104
104
104
104
41
238
246
193
39
238
245
193
102
102
102
39
230
192
102
102
209
65
129
216
65
129
164
65
130
39
238
245
250
246
230
192
212
133
184
222
185
65
162
222
185
189
104
41
223
235
121
162
243
193
173
251
193
173
248
189
243
193
215
149
193
220
132
193
165
246
181
243
193
164
246
193
212
133
184
41
171
229
192
41
237
187
192
123
205
106
192
221
155
243
208
154
193
66
211
0
66
148
66
163
66
170
66
174
66
179
66
185
66
202
66
222
66
231
66
236
66
70
68
0
81
128
81
129
81
129
42
0
64
0
111
111
111
111
111
111
191
244
191
127
16
218
81
74
46
255
186
223
185
41
224
66
44
127
23
223
191
165
66
38
209
143
247
20
37
164
191
190
246
243
222
246
66
38
164
190
41
237
186
237
187
17
44
210
189
236
246
247
225
80
176
104
107
171
185
81
162
247
20
55
17
63
240
225
226
125
83
42
12
46
0
216
17
75
225
80
176
123
75
192
80
106
184
221
159
241
28
95
186
223
66
97
39
233
119
119
170
28
104
82
143
175
82
138
174
82
138
25
110
210
41
225
80
178
66
63
82
138
170
20
131
151
241
28
131
218
82
138
167
155
247
20
86
66
92
156
241
28
143
250
209
245
245
64
101
164
189
38
64
39
238
28
161
216
230
240
81
74
65
198
81
10
81
70
81
73
192
211
181
250
193
209
179
187
66
194
82
249
239
229
66
194
82
249
221
155
241
130
186
247
186
147
187
243
186
153
186
241
192
82
249
163
139
130
187
247
186
192
212
133
182
39
236
178
41
236
130
246
193
82
214
247
102
39
228
223
189
192
41
236
244
228
192
219
141
26
241
110
208
41
235
251
224
121
241
192
39
237
178
41
237
179
192
50
192
48
64
75
237
108
20
117
14
217
252
167
15
251
141
4
2
135
239
252
109
15
123
15
118
70
141
162
60
72
160
115
225
158
50
154
54
229
81
81
52
41
33
81
169
63
82
167
41
82
202
167
34
83
207
60
221
167
36
255
133
241
93
206
115
221
93
167
64
141
3
227
229
14
73
82
94
90
169
86
172
77
33
167
81
160
64
207
60
94
90
221
167
86
134
243
254
202
202
167
103
254
123
111
144
118
71
2
167
28
4
12
167
106
13
194
177
16
180
123
110
158
223
207
154
206
132
202
95
167
124
221
83
154
124
167
60
108
102
117
102
217
167
152
108
152
117
151
167
152
130
174
123
177
170
119
163
253
235
180
168
241
233
154
158
167
60
219
171
252
198
3
188
176
231
212
183
30
151
189
49
60
49
189
30
44
188
1
13
191
180
255
183
172
138
239
130
73
217
74
252
74
127
241
108
213
117
211
11
70
252
239
253
241
215
169
223
83
154
227
95
243
188
95
231
243
116
232
167
238
0
202
206
237
221
95
194
183
218
243
253
2
14
3
12
4
13
241
9
250
68
241
9
250
241
32
40
17
6
80
176
38
32
40
16
50
240
84
80
113
17
96
20
2
247
20
14
48
68
2
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
81
167
83
97
62
101
99
68
156
91
85
106
54
88
122
93
65
95
133
87
152
53
169
91
159
122
150
54
89
147
46
0
0
0
0
0
0
0
0
0
51
65
254
65
72
65
74
104
104
65
83
65
4
65
52
65
33
65
162
65
154
189
41
237
187
192
46
109
171
183
186
246
171
246
142
187
247
186
183
246
243
193
175
185
250
208
41
235
251
224
121
125
192
175
185
243
41
233
151
18
142
217
224
121
135
240
192
123
150
106
250
193
175
248
191
193
65
95
0
39
230
32
64
38
0
64
75
65
2
65
4
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
